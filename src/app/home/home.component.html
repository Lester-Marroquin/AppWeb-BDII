<section>
  <div class="container">
    <div class="row">
      <div class="col-md-12" align="center">
        <br>
        <h1>Bienvenido Administrador</h1>
      </div>
    </div>
    <div class="row">

      <div class="col-md-10" align="right">
        <button type="button" class="btn btn-info" (click)="mostrarPerfil()">Perfil</button>
      </div>

      <div class="col-md-2" align="center">
        <button type="button" class="btn btn-danger" (click)="logout()">Cerrar sersión</button>
      </div>

    </div>
    <div class="col-md-12">
      <hr color="blue">
    </div>
  </div>
</section>

<div class="row" *ngIf="loading">
  <div class="col-md-12">
    <div class="spinner-border text-info float-right" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>
  <br>
  <br>
</div>

<br>

<!--Bonotes de acciones-->
<section>
  <div class="containter">
    <div class="row">

      <div class="col-md-2" align="center">
      </div>

      <div class="col-md-2" align="center">
        <h4>Usuarios</h4>
        <div>
          <hr color="blue">
          <button class="btn btn-outline-info" (click)="crearUsuario()">Crear usuario</button>
          <div class="col-md-3">
            <hr>
          </div>
          <button class="btn btn-outline-info" (click)="mostrarUsuario()">Listar usuarios</button>
        </div>
      </div>

      <div class="col-md-2" align="center">
        <h4>Productos</h4>
        <div>
          <hr color="red">
          <button class="btn btn-outline-danger" (click)="ingresarProd()">Ingresar producto</button>
          <div class="col-md-3">
            <hr>
          </div>
          <button class="btn btn-outline-danger" (click)="listarStock()">Listar stock</button>
        </div>
      </div>

      <div class="col-md-2" align="center">
        <h4>Pedidos</h4>
        <div>
          <hr color="green">
          <button class="btn btn-outline-secondary" (click)="verPedidosActivos()">Activos /
            Despachados</button>
          <div class="col-md-3">
            <hr>
          </div>
          <button class="btn btn-outline-secondary" (click)="verPedidosEntregado()">Entregados</button>
          <div class="col-md-3">
            <hr>
          </div>
          <button class="btn btn-outline-secondary" (click)="verPedidosCancelados()">Cancelados</button>
        </div>
      </div>

      <div class="col-md-2" align="center">
        <h4>Anuncios</h4>
        <div>
          <hr color="orange">
          <button class="btn btn-outline-warning" (click)="mostrarCrearAnuncio()">Crear anuncio</button>
          <div class="col-md-3">
            <hr>
          </div>
          <button class="btn btn-outline-warning" (click)="listarAnuncios()">Listar anuncios</button>
        </div>
      </div>

      <div class="col-md-2" align="center">
      </div>

    </div>
  </div>

</section>

<br>
<br>

<!--Seccion de perfil-->
<section>
  <div *ngIf="perfil" class="containter">
    <div class="row">

      <div class="col-md-2">
      </div>

      <div class="col-md-8" align="center">
        <div class="col-md-8" align="left">
          <hr color="red">

          <table class="table">
            <thead class="thead-dark">
              <tr>
                <th>Datos personales del alumno</th>
              </tr>
            </thead>
            <tbody>
              <td>
                <tr>
                  <p>Universidad: Mariano Galvez de Guatemala</p>
                </tr>
                <tr>
                  <p>Nombre del alumno: Lester Josué Marroquín Morales</p>
                </tr>
                <tr>
                  <p>Carnet: 3190-19-1607</p>
                </tr>
                <tr>
                  <p>Sección: A</p>
                </tr>
                <tr>
                  <p>Asignatura: Programación II</p>
                </tr>
                <tr>
                  <p>Catedratico: Ing. Carlos Davila</p>
                </tr>
              </td>
            </tbody>
          </table>

          <hr color="red">
        </div>
      </div>

    </div>
  </div>
</section>

<!--Crear un usuario-->
<section>
  <div *ngIf="crearUser" class="containter">
    <div class="row">

      <div class="col-md-3">
      </div>

      <div class="col-md-6" align="center">
        <h3>Creacción / Modificación de usuario</h3>
        <hr>
        <br>

        <form (ngSubmit)="crear()" id="crear">
          <div class="row">
            <div class="col-md-12">
              <input type="text" [(ngModel)]="usuarioN.nombreUsuario" [ngModelOptions]="{standalone: true}"
                placeholder="Nombre de usuario" class="form-control" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-12">
              <input type="password" [(ngModel)]="usuarioN.password" [ngModelOptions]="{standalone: true}"
                placeholder="Password" class="form-control" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-12">
              <input type="text" [(ngModel)]="usuarioN.telefono" [ngModelOptions]="{standalone: true}"
                placeholder="Telefono (10 caracteres max)" class="form-control" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-12">
              <input type="text" [(ngModel)]="usuarioN.direccion" [ngModelOptions]="{standalone: true}"
                placeholder="Direccion" class="form-control" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-12">
              <input class="btn btn-success float-right" type="submit" value="Guardar">
            </div>
          </div>
        </form>

      </div>

      <div class="col-md-3">
      </div>

    </div>
  </div>
</section>

<!--Listar Usuario-->
<section>
  <div *ngIf="mostrarUser" class="containter">
    <div class="row">

      <div class="col-md-2">
      </div>

      <div class="col-md-8">
        <h3 align="center">Listado de usuarios</h3>
        <hr>
        <br>
        <div class="col-md-12">
          <table class="table">
            <thead class="thead-dark">
              <tr>
                <th>Nombre</th>
                <th>Telefono</th>
                <th>Dirección</th>
                <th>Rol</th>
                <th>Acción</th>
                <th>Acción</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let usuario of usuarios">
                <td>
                  {{usuario.nombreUsuario}}
                </td>
                <td>
                  {{usuario.telefono}}
                </td>
                <td>
                  {{usuario.direccion}}
                </td>
                <td>
                  {{usuario.idRol}}
                </td>
                <td>
                  <button class="btn btn-outline-success" (click)="modificarUser(usuario)">Modificar</button>
                </td>
                <td>
                  <button class="btn btn-outline-danger" (click)="eliminarUser(usuario)">Eliminar</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="col-md-2">
      </div>

    </div>
  </div>
</section>

<!--Crear un producto-->
<section>
  <div *ngIf="ingresarProducto" class="containter">
    <div class="row">

      <div class="col-md-3">
      </div>

      <div class="col-md-6" align="center">
        <h3>Ingreso / Modificiación de producto</h3>
        <hr>
        <br>

        <form (ngSubmit)="crearProducto()" id="ingresarProducto">
          <div class="row">
            <div class="col-md-12">
              <input type="text" [(ngModel)]="producto.nombreProducto" [ngModelOptions]="{standalone: true}"
                placeholder="Nombre del producto" class="form-control" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-12">
              <input type="text" [(ngModel)]="producto.descripcionProducto" [ngModelOptions]="{standalone: true}"
                placeholder="Descripción" class="form-control" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-12">
              <input type="text" [(ngModel)]="producto.precioProducto" [ngModelOptions]="{standalone: true}"
                placeholder="Precio" class="form-control" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-12">
              <input type="text" [(ngModel)]="producto.imagen" [ngModelOptions]="{standalone: true}"
                placeholder="Imagen" class="form-control" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-12">
              <input type="number" [(ngModel)]="producto.cantidadDisponible" [ngModelOptions]="{standalone: true}"
                placeholder="Cantidad disponible" class="form-control" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-12">
              <input class="btn btn-success float-right" type="submit" value="Guardar">
            </div>
          </div>
        </form>

      </div>

      <div class="col-md-3">
      </div>

    </div>
  </div>
</section>

<!--Listar Stock-->
<section>
  <div *ngIf="mostrarProduct" class="containter">
    <div class="row">

      <div class="col-md-2">
      </div>

      <div class="col-md-8">
        <h3 align="center">Lista de stock</h3>
        <hr>
        <br>
        <div class="col-md-12">
          <table class="table">
            <thead class="thead-dark">
              <tr>
                <th>Id</th>
                <th>Nombre</th>
                <th>Descripción</th>
                <th>Precio Unidad</th>
                <th>En stock</th>
                <th>Acción</th>
                <th>Acción</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let stock of product">
                <td>
                  {{stock.idProducto}}
                </td>
                <td>
                  {{stock.nombreProducto}}
                </td>
                <td>
                  {{stock.descripcionProducto}}
                </td>
                <td>
                  {{"Q "+stock.precioProducto}}
                </td>
                <td>
                  {{stock.cantidadDisponible}}
                </td>
                <td>
                  <button class="btn btn-outline-success" (click)="modificarStock(stock)">Modificar</button>
                </td>
                <td>
                  <button class="btn btn-outline-danger" (click)="consultaEliminarStock(stock)">Eliminar</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="col-md-2">
      </div>

    </div>
  </div>
</section>

<!--Ver Pedidos Activos / Despachados-->
<section>
  <div *ngIf="activosDespachados" class="containter">
    <div class="row">

      <div align="center" class="col-md-7">
        <h3 align="center">Pedidos activos y despachados</h3>
        <div align="center" class="col-md-11">
          <hr>

          <table class="table">
            <thead class="thead-dark">
              <tr>
                <th>Id pedido</th>
                <th>Cliente</th>
                <th>Nit</th>
                <th>Fecha ingreso</th>
                <th>Total</th>
                <th>Estado</th>
                <th>Acción</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let ped of pedidos">
                <td>
                  {{ped.idPedido}}
                </td>
                <td>
                  {{ped.nombreCliente}}
                </td>
                <td>
                  {{ped.nitCliente}}
                </td>
                <td>
                  {{ped.fechaIngreso}}
                </td>
                <td>
                  {{ped.totalPedido}}
                </td>
                <td>
                  {{ped.estadoPedido}}
                </td>
                <td>
                  <button class="btn btn-outline-success" (click)="verDetallesPedActDesp(ped)">Ver detalles</button>
                </td>
              </tr>
            </tbody>
          </table>

        </div>
        <br>
      </div>


      <div *ngIf="activosDespachadosDetalles" class="col-md-5">
        <h4>Detalles</h4>
        <div class="col-md-8">
          <hr align="center">

          <div class="col-md-12">
            <table class="table table-sm">
              <thead>
                <th>
                  <tr>Id Pedido:
                    <td>
                      {{datosPedido.idPedido}}
                    </td>
                  </tr>
                  <tr>Cliente:
                    <td>
                      <input type="text" [(ngModel)]="datosPedido.nombreCliente" [ngModelOptions]="{standalone: true}"
                        placeholder="Nombre del cliente" class="form-control" required>
                    </td>
                  </tr>
                  <tr>Nit:
                    <td>
                      <input type="text" [(ngModel)]="datosPedido.nitCliente" [ngModelOptions]="{standalone: true}"
                        placeholder="NIT del cliente" class="form-control" required>
                    </td>
                  </tr>
                  <tr>Correo:
                    <td>
                      {{datosPedido.clienteCorreoCliente}}
                    </td>
                  </tr>
                  <tr>Fecha Ingreso:
                    <td>
                      {{datosPedido.fechaIngreso}}
                    </td>
                  </tr>
                  <tr>Telefono:
                    <td>
                      <input type="text" [(ngModel)]="datosPedido.telefono" [ngModelOptions]="{standalone: true}"
                        placeholder="Telefono" class="form-control" required>
                    </td>
                  </tr>
                  <tr>Dirección
                    <td>
                      <input type="text" [(ngModel)]="datosPedido.aDireccion" [ngModelOptions]="{standalone: true}"
                        placeholder="Dirección" class="form-control" required>
                    </td>
                  </tr>
                  <tr>Total Q
                    <td>
                      {{datosPedido.totalPedido}}
                    </td>
                  </tr>
                  <tr>Estado:
                    <td>
                      <input type="text" [(ngModel)]="datosPedido.estadoPedido" [ngModelOptions]="{standalone: true}"
                        placeholder="Estado" class="form-control" required>
                    </td>
                  </tr>
                  <tr>Fecha entrega / cancelado:
                    <td>
                      <input type="datetime-local" [(ngModel)]="datosPedido.fechaEntrega" [ngModelOptions]="{standalone: true}"
                        placeholder="Fecha entrega" class="form-control" required>
                    </td>
                  </tr>
                </th>
              </thead>
            </table>
          </div>

          <br>
          <button class="btn btn-outline-success" (click)="guardarCambiosPedido()">Guardar</button>
          <button class="btn btn-outline-danger" (click)="cancelarPedido()">Cancelar</button>
          <br>
          <hr>
          <br>

          <h5>Items</h5>
          <br>
          <table class="table">
            <thead class="thead-dark">
              <tr>
                <th>Producto</th>
                <th>Catidad</th>
                <th>Sub total</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let d of datosPedido.detallesList">
                <td>
                  {{d.nombreProducto}}
                </td>
                <td>
                  {{d.cantidad}}
                </td>
                <td>
                  Q. {{d.totalDetalle}}
                </td>
              </tr>
            </tbody>
          </table>

          <h4></h4>

        </div>
        <br>
      </div>

    </div>
  </div>
</section>

<!--Ver Pedidos Entregados-->
<section>
  <div *ngIf="pedidosEntregados" class="containter">
    <div class="row">

      <div align="center" class="col-md-7">
        <h3 align="center">Pedidos entregados a los clientes</h3>
        <div align="center" class="col-md-11">
          <hr>

          <table class="table">
            <thead class="thead-dark">
              <tr>
                <th>Id pedido</th>
                <th>Cliente</th>
                <th>Nit</th>
                <th>Fecha ingreso</th>
                <th>Fecha entrega</th>
                <th>Total Q</th>
                <th>Acción</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let ped of pedidos">
                <td>
                  {{ped.idPedido}}
                </td>
                <td>
                  {{ped.nombreCliente}}
                </td>
                <td>
                  {{ped.nitCliente}}
                </td>
                <td>
                  {{ped.fechaIngreso}}
                </td>
                <td>
                  {{ped.fechaEntrega}}
                </td>
                <td>
                  {{ped.totalPedido}}
                </td>
                <td>
                  <button class="btn btn-outline-success" (click)="verDetallesPedEntregados(ped)">Ver detalles</button>
                </td>
              </tr>
            </tbody>
          </table>

        </div>
        <br>
      </div>


      <div *ngIf="entregadosDetalles" class="col-md-5">
        <h4>Detalles</h4>
        <div class="col-md-8">
          <hr align="center">

          <div class="col-md-12">
            <table class="table table-sm">
              <thead>
                <th>
                  <tr>Id Pedido:
                    <td>
                      {{datosPedido.idPedido}}
                    </td>
                  </tr>
                  <tr>Cliente:
                    <td>
                      {{datosPedido.nombreCliente}}
                    </td>
                  </tr>
                  <tr>Nit:
                    <td>
                      {{datosPedido.nitCliente}}
                    </td>
                  </tr>
                  <tr>Correo:
                    <td>
                      {{datosPedido.clienteCorreoCliente}}
                    </td>
                  </tr>
                  <tr>Fecha Ingreso:
                    <td>
                      {{datosPedido.fechaIngreso}}
                    </td>
                  </tr>
                  <tr>Telefono:
                    <td>
                      {{datosPedido.telefono}}
                    </td>
                  </tr>
                  <tr>Dirección:
                    <td>
                      {{datosPedido.aDireccion}}
                    </td>
                  </tr>
                  <tr>Total Q
                    <td>
                      {{datosPedido.totalPedido}}
                    </td>
                  </tr>
                  <tr>Estado:
                    <td>
                      {{datosPedido.estadoPedido}}
                    </td>
                  </tr>
                  <tr>Fecha entrega:
                    <td>
                      {{datosPedido.fechaEntrega}}
                    </td>
                  </tr>
                </th>
              </thead>
            </table>
          </div>

          <br>

          <h5>Items</h5>
          <br>
          <table class="table">
            <thead class="thead-dark">
              <tr>
                <th>Producto</th>
                <th>Catidad</th>
                <th>Sub total</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let d of datosPedido.detallesList">
                <td>
                  {{d.nombreProducto}}
                </td>
                <td>
                  {{d.cantidad}}
                </td>
                <td>
                  Q. {{d.totalDetalle}}
                </td>
              </tr>
            </tbody>
          </table>

          <h4></h4>

        </div>
        <br>
      </div>

    </div>
  </div>
</section>

<!--Ver Pedidos Cancelados-->
<section>
  <div *ngIf="pedidosCancelados" class="containter">
    <div class="row">

      <div align="center" class="col-md-7">
        <h3 align="center">Pedidos entregados a los clientes</h3>
        <div align="center" class="col-md-11">
          <hr>

          <table class="table">
            <thead class="thead-dark">
              <tr>
                <th>Id pedido</th>
                <th>Cliente</th>
                <th>Nit</th>
                <th>Fecha ingreso</th>
                <th>Fecha cancelación</th>
                <th>Total Q</th>
                <th>Acción</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let ped of pedidos">
                <td>
                  {{ped.idPedido}}
                </td>
                <td>
                  {{ped.nombreCliente}}
                </td>
                <td>
                  {{ped.nitCliente}}
                </td>
                <td>
                  {{ped.fechaIngreso}}
                </td>
                <td>
                  {{ped.fechaEntrega}}
                </td>
                <td>
                  {{ped.totalPedido}}
                </td>
                <td>
                  <button class="btn btn-outline-success" (click)="verDetallesPedCancelados(ped)">Ver detalles</button>
                </td>
              </tr>
            </tbody>
          </table>

        </div>
        <br>
      </div>


      <div *ngIf="canceladosDetalles" class="col-md-5">
        <h4>Detalles</h4>
        <div class="col-md-8">
          <hr align="center">

          <div class="col-md-12">
            <table class="table table-sm">
              <thead>
                <th>
                  <tr>Id Pedido:
                    <td>
                      {{datosPedido.idPedido}}
                    </td>
                  </tr>
                  <tr>Cliente:
                    <td>
                      {{datosPedido.nombreCliente}}
                    </td>
                  </tr>
                  <tr>Nit:
                    <td>
                      {{datosPedido.nitCliente}}
                    </td>
                  </tr>
                  <tr>Correo:
                    <td>
                      {{datosPedido.clienteCorreoCliente}}
                    </td>
                  </tr>
                  <tr>Fecha Ingreso:
                    <td>
                      {{datosPedido.fechaIngreso}}
                    </td>
                  </tr>
                  <tr>Telefono:
                    <td>
                      {{datosPedido.telefono}}
                    </td>
                  </tr>
                  <tr>Dirección:
                    <td>
                      {{datosPedido.aDireccion}}
                    </td>
                  </tr>
                  <tr>Total Q
                    <td>
                      {{datosPedido.totalPedido}}
                    </td>
                  </tr>
                  <tr>Estado:
                    <td>
                      {{datosPedido.estadoPedido}}
                    </td>
                  </tr>
                  <tr>Fecha cancelado:
                    <td>
                      {{datosPedido.fechaEntrega}}
                    </td>
                  </tr>
                </th>
              </thead>
            </table>
          </div>

          <br>

          <h5>Items</h5>
          <br>
          <table class="table">
            <thead class="thead-dark">
              <tr>
                <th>Producto</th>
                <th>Catidad</th>
                <th>Sub total</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let d of datosPedido.detallesList">
                <td>
                  {{d.nombreProducto}}
                </td>
                <td>
                  {{d.cantidad}}
                </td>
                <td>
                  Q. {{d.totalDetalle}}
                </td>
              </tr>
            </tbody>
          </table>

          <h4></h4>

        </div>
        <br>
      </div>

    </div>
  </div>
</section>

<!--Ingresar un anuncio-->
<section>
  <div *ngIf="ingresarAnuncio" class="containter">
    <div class="row">

      <div class="col-md-3">
      </div>

      <div class="col-md-6" align="center">
        <h3>Creación de anuncio</h3>
        <hr>
        <br>

        <form (ngSubmit)="crearAnuncio()" id="ingresarAnuncio">
          <div class="row">
            <div class="col-md-12">
              <input type="text" [(ngModel)]="anuncio.nombreAnuncio" [ngModelOptions]="{standalone: true}"
                placeholder="Nombre del anuncio" class="form-control" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-12">
              <input type="text" [(ngModel)]="anuncio.imagenAnuncio" [ngModelOptions]="{standalone: true}"
                placeholder="Imagen" class="form-control" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-12">
              <input type="text" [(ngModel)]="anuncio.descripcionAnuncio" [ngModelOptions]="{standalone: true}"
                placeholder="Descripcion del anuncio" class="form-control" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-12">
              <input type="datetime-local" [(ngModel)]="anuncio.fechaInicio" [ngModelOptions]="{standalone: true}"
                placeholder="Fecha incial" class="form-control" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-12">
              <input type="datetime-local" [(ngModel)]="anuncio.fechaFin" [ngModelOptions]="{standalone: true}"
                placeholder="Fecha final" class="form-control" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-12">
              <input class="btn btn-success float-right" type="submit" value="Crear">
            </div>
          </div>
        </form>

      </div>

      <div class="col-md-3">
      </div>

    </div>
  </div>
</section>

<!--Listar Anuncios-->
<section>
  <div *ngIf="mostrarAnuncio" class="containter">
    <div class="row">

      <div class="col-md-1">
      </div>

      <div class="col-md-10">
        <h3 align="center">Lista de Anuncios</h3>
        <hr>
        <br>
        <div class="col-md-12">
          <table class="table">
            <thead class="thead-dark">
              <tr>
                <th>Id</th>
                <th>Nombre</th>
                <th>Descripción</th>
                <th>Imagen</th>
                <th>Fecha Inicio</th>
                <th>Fecha Fin</th>
                <th>Acción</th>
                <th>Acción</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let anunc of anuncios">
                <td>
                  {{anunc.idAnuncio}}
                </td>
                <td>
                  {{anunc.nombreAnuncio}}
                </td>
                <td>
                  {{anunc.descripcionAnuncio}}
                </td>
                <td>
                  {{anunc.imagenAnuncio}}
                </td>
                <td>
                  {{anunc.fechaInicio}}
                </td>
                <td>
                  {{anunc.fechaFin}}
                </td>
                <td>
                  <button class="btn btn-outline-success" (click)="modificarAnuncio(anunc)">Modificar</button>
                </td>
                <td>
                  <button class="btn btn-outline-danger" (click)="eliminarAnuncio(anunc)">Eliminar</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="col-md-1">
      </div>

    </div>
  </div>
</section>
